## A-3 OMP / 共有メモリエラー対策メモ

### 背景
- Step3 タスク2の簡易インポート時に `OMP: Error #179: Function Can't open SHM2 failed` が発生。共有メモリ/OMP周りの環境依存エラーと推測。

### 想定される対処候補（提案のみ、未実施）
- **スレッド数を絞る**  
  - `OMP_NUM_THREADS=1`  
  - `OPENBLAS_NUM_THREADS=1`  
  - `MKL_NUM_THREADS=1`  
  → python実行前に環境変数で指定して試す。
- **共有メモリ・ファイルディスクリプタの上限を確認**  
  - `ulimit -n`（必要なら上限を適切に上げる）  
  - `/dev/shm` の空き容量を確認。
- **仮想環境/コンテナ再起動**  
  - 共有メモリの一時的な状態不良を解消するための再起動。
- **ライブラリのバージョン/BLAS切り替え**  
  - `LD_PRELOAD` でOpenBLAS/MKLを切り替える、あるいは`pip install faiss-cpu` のバージョンを揃える。
- **権限周りの確認**  
  - マウント設定や実行ユーザが `/dev/shm` に書き込み可能か確認。

### 備考
- これらは一般的なワークアラウンドの列挙であり、現在の環境では実施していません。
